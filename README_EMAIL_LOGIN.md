# 이메일 로그인 설정 가이드

## 1. Firebase Console에서 이메일 링크 로그인 활성화

1. [Firebase Console](https://console.firebase.google.com/)에 접속
2. 프로젝트 선택 → "Authentication" 메뉴 클릭
3. "Sign-in method" 탭 선택
4. "Email/Password" 제공업체 활성화:
   - "Email/Password" 클릭
   - "Enable" 토글 ON
   - "Email link (passwordless sign-in)" 토글 ON
   - "Save" 클릭

## 2. 승인된 도메인 설정

1. "Sign-in method" 탭에서 "Authorized domains" 섹션 확인
2. 필요한 도메인 추가:
   - 개발: `localhost` (기본 포함)
   - 운영: 실제 도메인 (예: `yourdomain.com`)

## 3. 이메일 템플릿 커스터마이징 (선택사항)

1. "Templates" 탭 클릭
2. "Email link sign-in" 선택
3. 이메일 제목과 본문 커스터마이징:
   - 제목: 로그인 링크 관련 제목
   - 본문: 사용자에게 친숙한 메시지
   - 링크 텍스트: "로그인하기" 등

## 4. 기능 테스트

1. 웹사이트에서 "이메일로 로그인" 버튼 클릭
2. 이메일 주소 입력
3. "로그인 링크 전송" 클릭
4. 이메일 확인 후 링크 클릭
5. 자동 로그인 확인

## 이메일 로그인 프로세스

### 1단계: 이메일 주소 입력
- 사용자가 이메일 주소 입력
- 유효성 검사 후 Firebase로 로그인 링크 전송 요청

### 2단계: 이메일 확인
- 사용자 이메일로 로그인 링크 전송
- 링크 유효 시간: 1시간
- 스팸 폴더 확인 안내

### 3단계: 로그인 완료
- 이메일 링크 클릭 시 자동 로그인
- 사용자 계정 자동 생성 (신규 사용자)
- 기존 사용자는 기존 계정으로 로그인

## 보안 기능

### 링크 보안
- 일회용 로그인 링크 (한 번 사용 후 무효화)
- 시간 제한 (1시간 후 만료)
- 도메인 검증 (승인된 도메인에서만 사용 가능)

### 이메일 검증
- 이메일 주소 자동 검증
- 실제 이메일 소유자만 로그인 가능
- 피싱 공격 방지

## 사용자 경험

### 장점
- 비밀번호 불필요 (편의성 증대)
- 이메일 주소만으로 간편 로그인
- 비밀번호 분실 걱정 없음
- 모바일에서 편리한 로그인

### 주의사항
- 이메일 접근 권한 필요
- 인터넷 연결 필요 (이메일 확인)
- 이메일 전송 지연 가능성

## 기술적 구현

### 클라이언트 사이드
```javascript
// 이메일 링크 전송
await sendSignInLinkToEmail(auth, email, actionCodeSettings);

// 로그인 완료
await signInWithEmailLink(auth, email, window.location.href);
```

### 설정 옵션
```javascript
const actionCodeSettings = {
  url: window.location.origin + '/auth/email/callback',
  handleCodeInApp: true,
};
```

## 문제 해결

### 이메일이 오지 않는 경우
- 스팸 폴더 확인
- 이메일 주소 정확성 확인
- 네트워크 연결 상태 확인
- 잠시 후 다시 시도

### "링크가 유효하지 않습니다" 오류
- 링크 만료 (1시간 초과)
- 이미 사용된 링크
- 다른 기기에서 링크 클릭
- 새로운 링크 요청 필요

### 로그인이 완료되지 않는 경우
- 브라우저 쿠키/로컬스토리지 확인
- JavaScript 활성화 확인
- 브라우저 호환성 확인

## API 제한사항

### 전송 제한
- 동일 이메일: 분당 5회
- IP당: 시간당 100회
- 프로젝트당: 일일 제한 있음

### 보안 정책
- HTTPS 필수 (운영 환경)
- 승인된 도메인에서만 사용
- 이메일 주소 형식 검증

## 모니터링

### Firebase Console에서 확인 가능한 정보
- 로그인 시도 횟수
- 성공/실패 통계
- 사용자 등록 현황
- 오류 로그

### 로그 분석
- 이메일 전송 성공률
- 링크 클릭률
- 로그인 완료율
- 오류 발생 패턴

이메일 로그인은 사용자 편의성과 보안을 모두 제공하는 현대적인 인증 방식입니다. 