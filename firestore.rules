rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    /* ✅ 트랙 컬렉션 - 모든 사용자가 읽기 가능 */
    match /track/{docId} {
      allow read: if true; // 음원 찾기 페이지에서 누구나 트랙 목록 조회 가능
      allow write: if false; // 쓰기는 불허 (관리자만 가능)
    }
    
    /* ✅ 트랙 맞춤 제작용 컬렉션 */
    match /track_requests/{docId} {
      // 누구나 작성·조회 가능 (프로덕션 전 테스트 용)
      allow read, write: if true;
    }
    
    /* ✅ 기타 모든 문서는 기본적으로 접근 불허 */
    match /{document=**} {
      allow read, write: if false;
    }
  }
}