<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audionyx Admin</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/main.css">
    <style>
        /* ê´€ë¦¬ì ì „ìš© ë””ìì¸ - ì—…ë¬´ íš¨ìœ¨ì„± ì¤‘ì‹¬ */
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #f8fafc; color: #1e293b; margin: 0; }
        .admin-container { max-width: 1400px; margin: 16px auto; padding: 0 16px; }
        .admin-title { font-size: 28px; font-weight: 700; margin-bottom: 20px; color: #0f172a; }
        .gate { max-width: 420px; margin: 80px auto; padding: 32px; border: 1px solid #e2e8f0; border-radius: 16px; background: #ffffff; box-shadow: 0 10px 25px rgba(0,0,0,0.08); }
        .gate h2 { margin: 0 0 8px 0; font-size: 24px; color: #0f172a; }
        .gate .desc { color: #64748b; margin-bottom: 20px; font-size: 15px; }
        .gate input { width: 100%; padding: 14px 16px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; transition: border-color 0.2s; }
        .gate input:focus { outline: none; border-color: #3b82f6; }
        .gate button { margin-top: 16px; width: 100%; padding: 14px; background: #3b82f6; color: #fff; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 16px; transition: background 0.2s; }
        .gate button:hover { background: #2563eb; }
        .gate .error { color: #dc2626; margin-top: 12px; font-size: 14px; display: none; font-weight: 500; }

        .admin-app { display: none; }
        .admin-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .admin-grid.fullwidth-left { grid-template-columns: 1fr 0; }
        .panel { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .panel h3 { margin: 0 0 16px 0; font-size: 18px; font-weight: 700; color: #0f172a; }
        .row { display: flex; gap: 12px; align-items: center; margin-bottom: 12px; }
        .row input[type="text"] { flex: 1; padding: 10px 14px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; transition: border-color 0.2s; }
        .row input[type="text"]:focus { outline: none; border-color: #3b82f6; }
        .row button { padding: 10px 16px; border: 2px solid #e2e8f0; background: #f8fafc; border-radius: 8px; cursor: pointer; font-weight: 500; color: #475569; transition: all 0.2s; }
        .row button:hover { background: #e2e8f0; border-color: #cbd5e1; }
        .btn-logout { padding: 10px 16px; border: 0; background: linear-gradient(90deg, #ef4444, #f97316); color: #fff; border-radius: 999px; font-weight: 700; box-shadow: 0 4px 12px rgba(239,68,68,0.25); }
        .btn-logout:hover { filter: brightness(1.05); transform: translateY(-1px); }
        .doc-list { list-style: none; margin: 0; padding: 0; max-height: 520px; overflow: auto; border: 1px solid #e2e8f0; border-radius: 8px; }
        .doc-list li { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f1f5f9; padding: 12px 16px; font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace; font-size: 14px; color: #374151; }
        .doc-list li:last-child { border-bottom: none; }
        .doc-list li:hover { background: #f8fafc; }
        .doc-actions button { margin-left: 8px; }
        .editor { display: grid; grid-template-rows: auto 1fr auto; gap: 12px; min-height: 640px; }
        .editor textarea { width: 100%; height: 100%; resize: vertical; min-height: 420px; font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace; font-size: 14px; border: 2px solid #e2e8f0; border-radius: 8px; padding: 16px; background: #fafbfc; color: #1e293b; line-height: 1.5; }
        .editor textarea:focus { outline: none; border-color: #3b82f6; background: #ffffff; }
        .badge { display: inline-block; padding: 4px 10px; font-size: 12px; border-radius: 999px; background: #dcfce7; color: #166534; font-weight: 600; }
        .muted { color: #64748b; font-size: 13px; }
        .danger { background: #fef2f2 !important; color: #dc2626 !important; border-color: #fecaca !important; }

        /* ì»¬ë ‰ì…˜ í”„ë¦¬ì…‹ ë²„íŠ¼ë“¤ */
        .collection-presets { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .preset-btn { padding: 12px 16px; background: #f8fafc; color: #475569; border: 2px solid #e2e8f0; border-radius: 10px; cursor: pointer; text-align: center; font-size: 14px; font-weight: 600; transition: all 0.2s; }
        .preset-btn:hover { background: #e2e8f0; border-color: #cbd5e1; transform: translateY(-1px); }
        .preset-btn.active { background: #3b82f6; color: #ffffff; border-color: #3b82f6; box-shadow: 0 4px 12px rgba(59,130,246,0.25); }

        /* í…Œì´ë¸” ë·° ìŠ¤íƒ€ì¼ */
        .table-view { display: none; }
        .table-view.active { display: block; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 14px; margin-top: 16px; border: 1px solid #e2e8f0; border-radius: 8px; overflow: hidden; table-layout: fixed; }
        .data-table th, .data-table td { padding: 12px 16px; text-align: left; border-bottom: 1px solid #f1f5f9; word-wrap: break-word; word-break: break-all; }
        .data-table th { background: #f8fafc; font-weight: 700; position: sticky; top: 0; color: #1e293b; font-size: 13px; text-transform: uppercase; letter-spacing: 0.05em; }
        .data-table tbody { max-height: 480px; overflow: auto; }
        .data-table tr { transition: background-color 0.15s; }
        .data-table tr:hover { background: #f8fafc; }
        .data-table td { color: #334155; }
        .table-actions { display: flex; gap: 6px; }
        .table-actions button { padding: 6px 12px; font-size: 12px; border-radius: 6px; border: 1px solid; cursor: pointer; font-weight: 500; transition: all 0.2s; }
        .table-actions .btn-edit { color: #0f766e; border-color: #5eead4; background: #f0fdfa; }
        .table-actions .btn-edit:hover { background: #ccfbf1; }
        .table-actions .btn-delete { color: #dc2626; border-color: #fca5a5; background: #fef2f2; }
        .table-actions .btn-delete:hover { background: #fee2e2; }
        .table-actions .btn-approve { color: #059669; border-color: #6ee7b7; background: #ecfdf5; }
        .table-actions .btn-approve:hover { background: #d1fae5; }
        .table-actions .btn-reject { color: #dc2626; border-color: #fca5a5; background: #fef2f2; }
        .table-actions .btn-reject:hover { background: #fee2e2; }
        /* Y/E/U ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ ìƒ‰ìƒ (ë±ƒì§€ì™€ ì¼ì¹˜) */
        .table-actions .btn-quick { font-weight: 700; width: 32px; text-align: center; padding: 6px 0; }
        .table-actions .btn-y { color: #166534; border-color: #86efac; background: #dcfce7; }
        .table-actions .btn-y:hover { background: #bbf7d0; }
        .table-actions .btn-e { color: #5b21b6; border-color: #c4b5fd; background: #ede9fe; }
        .table-actions .btn-e:hover { background: #ddd6fe; }
        .table-actions .btn-u { color: #1e40af; border-color: #93c5fd; background: #dbeafe; }
        .table-actions .btn-u:hover { background: #bfdbfe; }
        /* íŠ¸ë™ ìš”ì²­: ì œì‘ì¤‘ ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ */
        .table-actions .btn-p { color: #1e40af; border-color: #93c5fd; background: #dbeafe; }
        .table-actions .btn-p:hover { background: #bfdbfe; }

        /* í•„í„°/ê²€ìƒ‰ ì˜ì—­ */
        .filter-controls { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; flex-wrap: wrap; }
        .filter-controls input[type="text"] { min-width: 240px; padding: 10px 14px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; }
        .filter-controls input[type="text"]:focus { outline: none; border-color: #3b82f6; }
        .filter-controls select { padding: 10px 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px; background: #ffffff; }
        .filter-controls select:focus { outline: none; border-color: #3b82f6; }

        /* ìƒíƒœ ë°°ì§€ë“¤ */
        .status-badge { padding: 4px 8px; font-size: 12px; border-radius: 6px; font-weight: 600; }
        .status-active { background: #dcfce7; color: #166534; }
        .status-pending { background: #fef9c3; color: #a16207; }
        .status-rejected { background: #fee2e2; color: #b91c1c; }
        /* ìš”ì²­ëœ ìƒ‰ìƒ ê·œì¹™ */
        .status-ê²€ì‚¬ì™„ë£Œ { background: #dcfce7; color: #166534; }
        .status-ì´ëª¨ì§€í‚¤ëˆ„ë½, .status-ì´ëª¨ì§€_í‚¤_ëˆ„ë½ { background: #ede9fe; color: #5b21b6; }
        .status-ê²€ì‚¬ì¤‘, .status-ê²€ì‚¬_ì¤‘ { background: #fef9c3; color: #a16207; }
        .status-ê²€ì‚¬ì‹¤íŒ¨, .status-ê²€ì‚¬_ì‹¤íŒ¨ { background: #fee2e2; color: #b91c1c; }
        .status-URLì¬í™•ì¸, .status-URL_ì¬í™•ì¸ { background: #dbeafe; color: #1e40af; }
        /* íŠ¸ë™ ìš”ì²­ ì „ìš© ìƒíƒœ */
        .status-ì œì‘ì¤‘ { background: #dbeafe; color: #1e40af; }
        .status-ë¯¸ì œì‘ { background: #fef9c3; color: #a16207; }

        /* ê³µí†µ: í¸ì§‘ íŒ¨ë„ ë¹„í™œì„± ëª¨ë“œ (ì‚¬ìš©ì/ì±„ë„ ë“±) */
        .no-editor-mode #left-panel { grid-column: 1 / span 2; }
        .no-editor-mode #editor-panel { display: none !important; }
        .no-editor-mode .table-scroll { max-height: 70vh !important; }
        /* ì‚¬ìš©ì í…Œì´ë¸”: ì „ì—­ í…Œì´ë¸” ìŠ¤íƒ€ì¼ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš© (ì»¤ìŠ¤í…€ ì œê±°) */
        /* ë‚´ìš© ì „ì²´ë³´ê¸° ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: #fff;
            padding: 24px;
            border-radius: 12px;
            width: 90%;
            max-width: 720px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 12px;
            margin-bottom: 16px;
        }
        .modal-header h3 {
            margin: 0;
            font-size: 18px;
        }
        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #94a3b8;
            padding: 0;
            line-height: 1;
        }
        .modal-body {
            overflow-y: auto;
        }
        .modal-body pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit;
            font-size: 15px;
            color: #334155;
            margin: 0;
        }
        .ellipsis-btn {
            display: inline-block;
            cursor: pointer;
            color: #3b82f6;
            font-weight: 700;
            margin-left: 4px;
        }
        .status-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        .status-dot.yellow { background-color: #f59e0b; }
        .status-dot.blue { background-color: #3b82f6; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-title">AUDIONYX Database Manager</div>

        <!-- ë¹„ë°€ë²ˆí˜¸ ê²Œì´íŠ¸ -->
        <div id="admin-gate" class="gate">
            <h2>ì ‘ê·¼ ë¹„ë°€ë²ˆí˜¸</h2>
            <div class="desc">ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
            <input id="admin-passcode" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <button id="admin-enter-btn">ì…ì¥</button>
            <div id="admin-gate-error" class="error">ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
        </div>

        <!-- ê´€ë¦¬ì ì•± -->
        <div id="admin-app" class="admin-app">
            <div class="panel" style="margin-bottom:12px; display:flex; justify-content:space-between; align-items:center; gap:12px;">
                <div style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
                    <span class="badge">Firestore ì—°ê²°</span>
                    <span id="project-id" class="muted" style="margin-left:0;"></span>
                    <span id="admin-auth-badge" class="badge" style="background:#fee2e2; color:#b91c1c;">ADMIN: OFF</span>
                    <span id="admin-email" class="muted"></span>
                </div>
                <div style="display:flex; align-items:center; gap:8px;">
                    <button id="btn-admin-login" type="button" class="btn-approve" aria-label="ê´€ë¦¬ì ë¡œê·¸ì¸">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
                    <button id="btn-admin-logout" type="button" class="btn-logout" style="display:none;" aria-label="ë¡œê·¸ì•„ì›ƒ">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>

            <!-- ì»¬ë ‰ì…˜ í”„ë¦¬ì…‹ ë²„íŠ¼ë“¤ -->
            <div class="panel" style="margin-bottom:12px;">
                <h3>ë¹ ë¥¸ ì»¬ë ‰ì…˜ ì ‘ê·¼</h3>
                <div class="collection-presets">
                    <div class="preset-btn" data-collection="users">ğŸ‘¥ ì‚¬ìš©ì</div>
                    <div class="preset-btn" data-collection="channels">ğŸ“º ì±„ë„</div>
                    <div class="preset-btn" data-collection="contentLinks">ğŸ”— ì½˜í…ì¸ ë§í¬</div>
                    <div class="preset-btn" data-collection="track_requests" title="ê¶Œí•œì´ í•„ìš”í•˜ê±°ë‚˜ ì»¬ë ‰ì…˜ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤">ğŸµ íŠ¸ë™ìš”ì²­</div>
                    <div class="preset-btn" data-collection="track_new">ğŸ¼ ìŒì›DB</div>
                    <div class="preset-btn" data-collection="user_withdraw_accounts" title="ê¶Œí•œì´ í•„ìš”í•˜ê±°ë‚˜ ì»¬ë ‰ì…˜ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤">ğŸ’³ ê³ ê° ê³„ì¢Œ</div>
                </div>
            </div>

            <div class="admin-grid">
                <!-- ì™¼ìª½: ì»¬ë ‰ì…˜/ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ -->
                <div id="left-panel" class="panel">
                    <h3>ì»¬ë ‰ì…˜ íƒìƒ‰</h3>
                    <div class="row">
                        <input id="collection-input" type="text" placeholder="ì»¬ë ‰ì…˜ ì´ë¦„ ì…ë ¥ (ì˜ˆ: users)">
                        <button id="btn-load-collection">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    </div>
                    
                    <!-- ê¸°ë³¸ ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ ë·° -->
                    <div id="basic-view">
                        <ul id="doc-list" class="doc-list"></ul>
                    </div>

                    <!-- í…Œì´ë¸” ë·°ë“¤ -->
                    <div id="table-view-users" class="table-view">
                        <div class="filter-controls">
                            <input type="text" id="filter-users" placeholder="ì‚¬ìš©ì ê²€ìƒ‰ (ì´ë¦„, ì´ë©”ì¼, ì•„ì´ë””)">
                            <select id="filter-users-provider">
                                <option value="">ëª¨ë“  ê°€ì…ë°©ì‹</option>
                                <option value="google">êµ¬ê¸€</option>
                                <option value="emailpassword">ì´ë©”ì¼</option>
                            </select>
                            <div style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                                <span class="muted">ë“±ë¡ ê³ ê° ìˆ˜</span>
                                <span id="users-count" class="badge">0</span>
                            </div>
                        </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì´ë¦„</th>
                                        <th>ì´ë©”ì¼</th>
                                        <th>ì•„ì´ë””</th>
                                        <th>ì „í™”ë²ˆí˜¸</th>
                                        <th>ê°€ì…ë°©ì‹</th>
                                        <th>ê°€ì…ì¼</th>
                                    </tr>
                                </thead>
                                <tbody id="users-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="table-view-channels" class="table-view">
                        <div class="filter-controls">
                            <input type="text" id="filter-channels" placeholder="ì±„ë„ ê²€ìƒ‰ (URL, í”Œë«í¼)">
                            <select id="filter-channels-status">
                                <option value="">ëª¨ë“  ìƒíƒœ</option>
                                <option value="ê²€ì‚¬ì¤‘">ê²€ì‚¬ì¤‘</option>
                                <option value="ìŠ¹ì¸ë¨">ìŠ¹ì¸ë¨</option>
                                <option value="ê±°ë¶€ë¨">ê±°ë¶€ë¨</option>
                                <option value="ì´ëª¨ì§€í‚¤ëˆ„ë½">ì´ëª¨ì§€ í‚¤ ëˆ„ë½</option>
                                <option value="URLì¬í™•ì¸">URL ì¬í™•ì¸</option>
                            </select>
                            <select id="filter-channels-sort">
                                <option value="recent">ìµœì‹ ìˆœ</option>
                                <option value="status">ìƒíƒœìˆœ (ê²€ì‚¬ì¤‘ â†’ í‚¤ëˆ„ë½ â†’ ì¬í™•ì¸ â†’ ì™„ë£Œ)</option>
                            </select>
                            <div style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                                <span class="muted">ë“±ë¡ ì±„ë„ ìˆ˜</span>
                                <span id="channels-count" class="badge">0</span>
                            </div>
                        </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ìš©ì</th>
                                        <th>ì±„ë„ URL</th>
                                        <th>í”Œë«í¼</th>
                                        <th>ì´ëª¨ì§€í‚¤</th>
                                        <th>ë“±ë¡ì¼</th>
                                        <th>ì•¡ì…˜</th>
                                        <th style="text-align:right;">ìƒíƒœ</th>
                                    </tr>
                                </thead>
                                <tbody id="channels-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="table-view-track_requests" class="table-view">
                        <div class="filter-controls">
                            <input type="text" id="filter-track-requests" placeholder="íŠ¸ë™ ìš”ì²­ ê²€ìƒ‰">
                            <select id="filter-track-requests-status">
                                <option value="">ëª¨ë“  ìƒíƒœ</option>
                                <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                <option value="approved">ìŠ¹ì¸ë¨</option>
                                <option value="rejected">ê±°ë¶€ë¨</option>
                                <option value="ì œì‘ì¤‘">ì œì‘ì¤‘</option>
                                <option value="ë¯¸ì œì‘">ë¯¸ì œì‘</option>
                            </select>
                            <div style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                                <span class="muted">ìš”ì²­</span><span id="track-requests-count" class="badge">0</span>
                                <span class="muted">ì œì‘ì¤‘</span><span id="track-inprod-count" class="badge" style="background:#dbeafe;color:#1e40af;">0</span>
                                <span class="muted">ë¯¸ì œì‘</span><span id="track-notprod-count" class="badge" style="background:#fef9c3;color:#a16207;">0</span>
                            </div>
                        </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ìš©ì</th>
                                        <th>ìš”ì²­ì ì´ë©”ì¼</th>
                                        <th>ì¥ë¥´</th>
                                        <th>ë ˆí¼ëŸ°ìŠ¤ URL</th>
                                        <th>ìš”ì²­ ë‚´ìš©</th>
                                        <th>ìš”ì²­ì¼</th>
                                        <th>ì•¡ì…˜</th>
                                        <th>ìƒíƒœ</th>
                                    </tr>
                                </thead>
                                <tbody id="track-requests-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="table-view-contentLinks" class="table-view">
                        <div class="filter-controls">
                            <input type="text" id="filter-content-links" placeholder="ì½˜í…ì¸ ë§í¬ ê²€ìƒ‰ (URL, í”Œë«í¼)">
                            <div style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                                <span class="muted">ë“±ë¡ ë§í¬ ìˆ˜</span>
                                <span id="content-links-count" class="badge">0</span>
                            </div>
                        </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ìš©ì</th>
                                        <th>ë§í¬ URL</th>
                                        <th>í”Œë«í¼</th>
                                        <th>ë“±ë¡ì¼</th>
                                    </tr>
                                </thead>
                                <tbody id="content-links-tbody"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="table-view-track_new" class="table-view">
                        <details id="tracks-collection-panel" open class="panel" style="margin-bottom:12px;">
                            <summary style="cursor:pointer; font-weight:700; font-size:16px;">ì»¬ë ‰ì…˜ íƒìƒ‰</summary>
                            <div class="filter-controls" style="margin-top:12px;">
                            <input type="text" id="filter-tracks" placeholder="ìŒì› ê²€ìƒ‰ (ì œëª©, ì•„í‹°ìŠ¤íŠ¸)">
                            
                            <div style="display:flex; align-items:center; gap:8px;">
                                <span class="muted">ì´ íŠ¸ë™</span>
                                <span id="tracks-count" class="badge">0</span>
                            </div>
                            </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì œëª©</th>
                                        <th>ì•„í‹°ìŠ¤íŠ¸</th>
                                        <th>ì¬ìƒì‹œê°„</th>
                                        <th>íŒŒì¼</th>
                                        <th>ìš©ëŸ‰</th>
                                        <th>ë“±ë¡ì¼</th>
                                    </tr>
                                </thead>
                                <tbody id="tracks-tbody"></tbody>
                            </table>
                        </div>
                        </details>

                        <details id="tracks-upload-panel" class="panel">
                            <summary style="cursor:pointer; font-weight:700; font-size:16px;">ìŒì› ì—…ë¡œë“œ ë§¤ë‹ˆì €</summary>
                            <div class="row" style="margin-top:12px; flex-wrap:wrap; gap:12px;">
                                <input id="bulk-tracks-file" type="file" accept=".mp3,audio/mpeg" multiple />
                                <input id="bulk-covers-file" type="file" accept="image/*" multiple />
                                <input id="bulk-meta-file" type="file" accept=".xlsx,.xls,.csv" />
                            </div>
                            <div class="panel" style="margin-top:8px;">
                                <h3 style="margin:0 0 8px 0; font-size:14px;">ë©”íƒ€ë°ì´í„° íŒŒì¼ ì—…ë¡œë“œ (Excel/CSV)</h3>
                                <div class="row" style="align-items:center; gap:8px;"><small class="muted">ì§€ì› ì»¬ëŸ¼ ì˜ˆ: title, mood, use-case, ISRC, Primary Artist, Genre, Release Date, C-Line, C-Year, P-Line, P-Year, Track P-Line, Track P-Year, Track ID, Track Listing, mood 1, mood 2, usecase1~3</small></div>
                                <div class="row" style="justify-content:flex-end; margin-top:8px; gap:8px;">
                                    <button id="btn-validate-audio" type="button">ê²€ì¦</button>
                                    <button id="btn-run-audio-upload" type="button" disabled>ì—…ë¡œë“œ ì‹¤í–‰</button>
                                </div>
                            </div>
                            <div id="upload-validate-panel" class="panel" style="display:none; margin-top:8px;">
                                <h3 style="margin:0 0 8px 0; font-size:14px;">ê²€ì¦ ê²°ê³¼</h3>
                                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
                                    <div>
                                        <span class="muted">ì§„í–‰ë¥ </span>
                                        <span id="upload-progress-text" class="badge">0%</span>
                                    </div>
                                    <div style="display:flex; gap:8px; align-items:center;">
                                        <span class="muted">ì„±ê³µ</span><span id="upload-success-count" class="badge">0</span>
                                        <span class="muted">ì‹¤íŒ¨</span><span id="upload-fail-count" class="badge" style="background:#fee2e2;color:#b91c1c;">0</span>
                                    </div>
                                </div>
                                <ul id="upload-validate-list" style="list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px;"></ul>
                            </div>
                        </details>
                    </div>

                    <div id="table-view-user_withdraw_accounts" class="table-view">
                        <div class="filter-controls">
                            <input type="text" id="filter-accounts" placeholder="ê³„ì¢Œ ê²€ìƒ‰ (ì€í–‰, ì˜ˆê¸ˆì£¼)">
                            <div style="margin-left:auto; display:flex; align-items:center; gap:8px;">
                                <span class="muted">ì´ ê³„ì¢Œ</span>
                                <span id="accounts-count" class="badge">0</span>
                            </div>
                        </div>
                        <div class="table-scroll" style="max-height:520px; overflow:auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ì‚¬ìš©ì</th>
                                        <th>ì€í–‰</th>
                                        <th>ê³„ì¢Œë²ˆí˜¸</th>
                                        <th>ì˜ˆê¸ˆì£¼</th>
                                        <th>ë“±ë¡ì¼</th>
                                        <th>ì½˜í…ì¸  ë§í¬</th>
                                    </tr>
                                </thead>
                                <tbody id="accounts-tbody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                
            </div>
        </div>
    </div>

    <!-- ë‚´ìš© ì „ì²´ë³´ê¸° ëª¨ë‹¬ -->
    <div id="content-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ì „ì²´ ë‚´ìš©</h3>
                <button id="modal-close-btn" class="modal-close">&times;</button>
            </div>
            <div id="modal-body" class="modal-body">
                <pre></pre>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script type="module" src="../js/firebase.js"></script>
    <script type="module" src="../js/admin.js"></script>
</body>
</html>


